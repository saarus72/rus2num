# (Russian) numerals to numbers

A small text-to-number package to transform a line like this

    ััะธััะฐ ััะธะดัะฐัั ะฟััั ั ะฟะพะปะพะฒะธะฝะพะน ััััั ะพัะฑะพัะฝัั ัะพะปะดะฐั ะกะจะ ะธ ััะธะฝะฐะดัะฐัั ัะตะปัั ะดะฒะฐะดัะฐัั ะพะดะฝะฐ ัะพัะฐั ะฟัะพัะตะฝัะฐ ะฒัะตะน ัะบะพะฝะพะผะธะบะธ ะผะธัะฐ ะฟัะพัะธะฒ ะฟะพะปััะพัะฐ ััััะบะธั ะทะตะผะปะตะบะพะฟะพะฒ-ััะฐัะพะพะฑััะดัะตะฒ

to a line like this

    335500 ะพัะฑะพัะฝัั ัะพะปะดะฐั ะกะจะ ะธ 13.21 ะฟัะพัะตะฝัะฐ ะฒัะตะน ัะบะพะฝะพะผะธะบะธ ะผะธัะฐ ะฟัะพัะธะฒ 1.5 ััััะบะธั ะทะตะผะปะตะบะพะฟะพะฒ-ััะฐัะพะพะฑััะดัะตะฒ

Based on **yargy** and **natasha**.

> Locked on `natasha 0.10` because of the bloatness of the later versions.
> May be updated easily to the latest `natasha` with a small change of providing an `Extractor` constructor with a `pymorphy` instance.
>
>     super(Rus2Num, self).__init__(NUMBER, pymorphy2.MorphAnalyzer())

## Installation

`$ pip install rus2num`

## Usage

```python
from run2num import Rus2Num

r2n = Rus2Num()
text = "ะัะฟะปะฐัั ะทะฐ ะฒัะพัะพะณะพ-ััะตััะตะณะพ ัะตะฑะตะฝะบะฐ ะฒััะพัะปะธ ะฝะฐ ะฟััััะพั ะดะฒะฐะดัะฐัั ะฟััั ัััััะฝัั ะฟัะพัะตะฝัะฐ ะธ ัะพััะฐะฒะธะปะธ 90 ััััั ััะฑะปะตะน"
print(r2n(text))
# ะัะฟะปะฐัั ะทะฐ 2-3 ัะตะฑะตะฝะบะฐ ะฒััะพัะปะธ ะฝะฐ 0.525 ะฟัะพัะตะฝัะฐ ะธ ัะพััะฐะฒะธะปะธ 90000 ััะฑะปะตะน
```

## Comparison

There are but a few packages from namely 
* NVidia's [NeMo](https://github.com/NVIDIA/NeMo-text-processing),
* [Oknolaz](https://github.com/Oknolaz/Russian_w2n),
* [SergeyShk](https://github.com/SergeyShk/Word-to-Number-Russian) and its forks from
    * [averkij](https://github.com/averkij/Word-to-Number-Russian) and
    * [flockentanz](https://github.com/flockentanz/word_to_number_ru).

**NeMo** works well but tends to miss many cases I won't have missed (see the comparison table below).

**Oknolaz** needs to be fed with extracted numbers only and does many mistakes in that case even so bad choice for us.

**SergeyShk** does either
* `replace_groups` โ `ัััััะฐ ััะพ` to `1100` but `ััะพ ะดะฒะตััะธ ััะธััะฐ` to `400` or
* `replace` โ `ััะพ ะดะฒะตััะธ ััะธััะฐ` to `100 200 300` but `ัััััะฐ ััะพ` to `1000 100`.

It is obvious that addition should be done on decreasing values only so there are some forks to fix it (the overall code is a mess so that I didn't want to do it myself anyway).

**averkij** and **flockentanz** work fine both but have some bugs so I took the second one and fixed them. Also I cover cases like `ั ะฟะพะปะพะฒะธะฝะพะน` and `ะพะดะฝะฐ ัะตะปะฐั ะดะฒะต ะดะตััััั`.

| Original | ๐ก NeMo TP | ๐ด Oknolaz `replace` | ๐ด SergeyShk `replace_groups` | ๐ด SergeyShk `replace` | ๐ด averkij `replace` | ๐ด flockentanz `replace_groups_sa` | ๐ข **rus2num** |
|--|--|--|--|--|--|--|--|
| `ััะพ ะดะฒะตััะธ ััะธััะฐ ะดะฐ ัะพัั ัััััั ัะฐะท` | ๐ข`100 200 300 ะดะฐ ัะพัั 1000 ัะฐะท` | ๐ด`600000` | ๐ด`400 ะดะฐ ัะพัั 1000 ัะฐะท` | ๐ข`100 200 300 ะดะฐ ัะพัั 1000 ัะฐะท` | ๐ด`10200 300 ะดะฐ ัะพัั 1000 ัะฐะท` | ๐ข`100 200 300 ะดะฐ ัะพัั 1000 ัะฐะท` | ๐ข`100 200 300 ะดะฐ ัะพัั 1000 ัะฐะท` |
| `ัััััะฐ ััะพ` | ๐ข`1100` | ๐ข`1100` | ๐ข`1100` | ๐ด`1000 100` | ๐ข`1100` | ๐ข`1100` | ๐ข`1100` |
| `ั ะฒะธะดะตะป ััะพ-ะดะฒะตััะธ ัััะบ` | ๐ก`ั ะฒะธะดะตะป ััะพ-ะดะฒะตััะธ ัััะบ` | ๐ด`300` | ๐ข`ั ะฒะธะดะตะป 100-200 ัััะบ` | ๐ข`ั ะฒะธะดะตะป 100-200 ัััะบ` | ๐ข`ั ะฒะธะดะตะป 100-200 ัััะบ` | ๐ข`ั ะฒะธะดะตะป 100-200 ัััะบ` | ๐ข`ั ะฒะธะดะตะป 100-200 ัััะบ` |
| `ะฒะพัะตะผั ะดะตะฒััััะพั ะดะฒะฐะดัะฐัั ะดะฒะฐ ะฟััั ะฟััั ะฟััั ััะธะดัะฐัั ะฟััั ััะธะดัะฐัั ะฟััั, ะปัััะต ะฟะพะทะฒะพะฝะธัั, ัะตะผ ะทะฐะฝะธะผะฐัั` | ๐ก`ะฒะพัะตะผั 922 ะฟััั ะฟััั ะฟััั 35 35 , ะปัััะต ะฟะพะทะฒะพะฝะธัั, ัะตะผ ะทะฐะฝะธะผะฐัั` | ๐ด`8` | ๐ด`115, ะปัััะต ะฟะพะทะฒะพะฝะธัั, ัะตะผ ะทะฐะฝะธะผะฐัั` | ๐ด`8 900 20 2 5 5 5 30 5 30 5, ะปัััะต ะฟะพะทะฒะพะฝะธัั, ัะตะผ ะทะฐะฝะธะผะฐัั` | ๐ข`8 922 5 5 5 35 35, ะปัััะต ะฟะพะทะฒะพะฝะธัั, ัะตะผ ะทะฐะฝะธะผะฐัั` | ๐ข`8 922 5 5 5 35 35, ะปัััะต ะฟะพะทะฒะพะฝะธัั, ัะตะผ ะทะฐะฝะธะผะฐัั` | ๐ข`8 922 5 5 5 35 35, ะปัััะต ะฟะพะทะฒะพะฝะธัั, ัะตะผ ะทะฐะฝะธะผะฐัั` |
| `ััะธ ั ะฟะพะปะพะฒะธะฝะพะน ัะตะปะพะฒะตะบะฐ` | ๐ก`ััะธ ั ะฟะพะปะพะฒะธะฝะพะน ัะตะปะพะฒะตะบะฐ` | ๐ด`3` | ๐ก`3 ั ะฟะพะปะพะฒะธะฝะพะน ัะตะปะพะฒะตะบะฐ` | ๐ก`3 ั ะฟะพะปะพะฒะธะฝะพะน ัะตะปะพะฒะตะบะฐ` | ๐ข`3.5 ัะตะปะพะฒะตะบะฐ` | ๐ก`3 ั ะฟะพะปะพะฒะธะฝะพะน ัะตะปะพะฒะตะบะฐ` | ๐ข`3.5 ัะตะปะพะฒะตะบะฐ` |
| `ะผะธะปะปะธะพะฝ ััะพ ััััั ััะพ ะทะฐะนัะตะฒ` | ๐ข`1100100 ะทะฐะนัะตะฒ` | โ`list index out of range` | ๐ด`1000100100 ะทะฐะนัะตะฒ` | ๐ด`1000000 100000 100 ะทะฐะนัะตะฒ` | `1100100 ะทะฐะนัะตะฒ` | ๐ด`1000100100 ะทะฐะนัะตะฒ` | ๐ข`1100100 ะทะฐะนัะตะฒ` |
| `ะพะดะฝะธ ะดะฒะพะนะบะธ ะธ ะฝะธ ะพะดะฝะพะน ะฟััััะบะธ` | ๐ก`ะพะดะฝะธ ะดะฒะพะนะบะธ ะธ ะฝะธ ะพะดะฝะพะน ะฟััััะบะธ` | ๐ก`No valid number words found! ...` | ๐ก`1 ะดะฒะพะนะบะธ ะธ ะฝะธ 1 ะฟััััะบะธ` | ๐ก`1 ะดะฒะพะนะบะธ ะธ ะฝะธ 1 ะฟััััะบะธ` | ๐ก`1 ะดะฒะพะนะบะธ ะธ ะฝะธ 1 ะฟััััะบะธ` | ๐ก`1 ะดะฒะพะนะบะธ ะธ ะฝะธ 1 ะฟััััะบะธ` | ๐ก`1 ะดะฒะพะนะบะธ ะธ ะฝะธ 1 ะฟััััะบะธ` |
| `ะฑะตะท ะพะดะฝะพะน ะผะธะฝััั ะดะฒะฐ` |๐ข `01:59` | ๐ด`2` | ๐ข`ะฑะตะท 1 ะผะธะฝััั 2` | ๐ข`ะฑะตะท 1 ะผะธะฝััั 2` | ๐ข`ะฑะตะท 1 ะผะธะฝััั 2` | ๐ข`ะฑะตะท 1 ะผะธะฝััั 2` | ๐ข`ะฑะตะท 1 ะผะธะฝััั 2` |
| `ะฒัะพัะฐั ะดะฐัะฐ ะฟััั ัะพัะพะบ` | ๐ก`ะฒัะพัะฐั ะดะฐัะฐ ะฟััั ัะพัะพะบ` | ๐ด`5` | ๐ข`2 ะดะฐัะฐ 5 ัะพัะพะบ` | ๐ข`2 ะดะฐัะฐ 5 ัะพัะพะบ` | ๐ข`2 ะดะฐัะฐ 5 ัะพัะพะบ` | ๐ข`2 ะดะฐัะฐ 5 ัะพัะพะบ` | ๐ข`2 ะดะฐัะฐ 5 ัะพัะพะบ` |
| `ะดะฒะตััะธ ะฟัััะดะตััั ั ะฟะพะปะพะฒะธะฝะพะน ััััั ะพัะฑะพัะฝัั ัะพะปะดะฐั ะัะฐะบะฐ` | ๐ก`250 ั ะฟะพะปะพะฒะธะฝะพะน 1000 ะพัะฑะพัะฝัั ัะพะปะดะฐั ะัะฐะบะฐ` | ๐ด`250000` | ๐ก`250 ั ะฟะพะปะพะฒะธะฝะพะน 1000 ะพัะฑะพัะฝัั ัะพะปะดะฐั ะัะฐะบะฐ` | ๐ด`200 50 ั ะฟะพะปะพะฒะธะฝะพะน 1000 ะพัะฑะพัะฝัั ัะพะปะดะฐั ะัะฐะบะฐ` | ๐ด`2050000.5 ะพัะฑะพัะฝัั ัะพะปะดะฐั ะัะฐะบะฐ` | ๐ก`250 ั ะฟะพะปะพะฒะธะฝะพะน 1000 ะพัะฑะพัะฝัั ัะพะปะดะฐั ะัะฐะบะฐ` | ๐ข`250500 ะพัะฑะพัะฝัั ัะพะปะดะฐั ะัะฐะบะฐ` |
| `ะฝะพะปั ัะตะปัั ะฝะพะปั ะดะตััััั ะผะธะฝัั ะดะฒะต ัะตะปัั ัะตััั ัะพััั` | ๐ข`0,0 -2,06` | ๐ก`Redundant number word! ...` | ๐ด`0 ัะตะปัั 0.0 ะผะธะฝัั 2 ัะตะปัั 0.06` | ๐ด`0 ัะตะปัั 0.0 ะผะธะฝัั 2 ัะตะปัั 0.06` | ๐ด`0 ัะตะปัั 0.0 ะผะธะฝัั 2 ัะตะปัั 0.06` | ๐ด`0 ัะตะปัั 0.0 ะผะธะฝัั 2 ัะตะปัั 0.06` | ๐ข`0 ะผะธะฝัั 2.06` |
